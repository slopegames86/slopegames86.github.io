GZP.Preloader=function(){GZP.Layer.call(this);var t=this;t.fade=new GZP.Quad,this.fade.setColorHex(4294967295),t.addChild(this.fade),t.center=new GZP.DisplayObjectContainer,t.addChild(this.center),GZLOADER.modify(108,100),t.back=GZP.AtlasQuad.fromRect(-750,-956,1500,1913,"atlases/preloader.atlas","back"),this.back.visible=!1,t.progressBack=GZP.AtlasQuad.fromRect(-636,-132,1273,264,"atlases/preloader.atlas","progress_bg"),t.progress=GZP.AtlasQuad.fromRect(-602,-96,1205,193,"atlases/preloader.atlas","progress"),t.progress.setXFactor=function(t){this.v2.set(1205*t-602,-96),this.v3.set(1205*t-602,97),this.uv2.set((this.region.u2-this.region.u1)*t+this.region.u1,this.region.v1),this.uv3.set((this.region.u2-this.region.u1)*t+this.region.u1,this.region.v2)},t.progressValue=0,t.total=-1,t.loading=GZP.LocaleAtlasQuad.fromRect(-503,-70,1006,141,"atlases/preloader.atlas","loading"),this.gamestart=!1,this.tc=0,this.kc=0,t.ready=new GZP.DisplayObjectContainer,this.ready.addChild(GZP.LocaleAtlasQuad.fromRect(-500,-46,1e3,92,"atlases/preloader.atlas",GZP.Utils.isMobile()?"tap":"click")),t.ready.visible=!1,t.ready.y=t.loading.y=t.progressBack.y=t.progress.y=524,t.center.addEventListener("pointerdown",function(t){}),t.center.addEventListener("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||(e.cancelable&&e.preventDefault(),e.stopPropagation(),e.cancelled=!0,t.center.dispatchEvent({type:"pointerdown"}))}),GZP.TextureLoader.load("atlases/preloader.png"),GZP.AtlasLoader.load("atlases/preloader.atlas",function(){GZP.TextureLoader.load("atlases/preloader.png",function(){t.center.addChild(t.back),t.center.addChild(t.ready),GZP.SoundLoader.webaudio?(GZP.SoundLoader.load("sounds.ogg","sounds.ogg"),GZP.SoundLoader.loadAtlas("sound/sounds.js","sounds.ogg",null,function(t){console.log("Can't load sound atlas",t)})):GZP.XHRLoader.load("sound/sounds.js",function(t){for(var e=JSON.parse(t.request.response),a=0,o=e.length;a<o;++a)GZP.SoundLoader.load(e[a].id,e[a].id+".ogg")},function(t){console.log("Can't load sound atlas",t)}),GZP.Cross=new GZP.Cross,GZP.Play=new GZP.Play,GZP.Shop=new GZP.Shop,GZP.Menu=new GZP.Menu,GZP.Pause=new GZP.Pause,GZP.Score=new GZP.Score,t.total=GZP.Loader.getQueueLength()},function(){console.log("Can't load Preloader atlas texture",event)})},function(t){console.log("Can't load Preloader atlas",t)})},GZP.Loading=function(){var t=this;const e=[105,102,40,100,97,116,97,46,105,110,71,97,109,101,83],a=[104,97,114,101,32,61,61,32,39,84,119,105,116,116],o=[101,114,32,45,32,70,97,99,101,98,111,111],n=[107,32,45,32,71,111,111,103,108],i=[101,39,41,123,114,101,116,117,114,110,32,100,97,116,97,59,125],s=function(t){for(var e=[],a=0;a<t.length;a++)e=e.concat(t[a]);return e},r=function(t){for(var e="",a=0,o=t.length;a<o;a++)e+=String.fromCharCode(t[a]);return e};gamezop.Initialize({apiKey:"57d370d9-d604-4b6b-8628-95ee800b2386",gameCode:"Skz4pzkDqyX",debug:!0,gameInit:function(t){GZP.gameInit(t)},play:function(){GZP.resumeUpdate()},pause:function(){GZP.pauseUpdate()},mute:function(){GZP.muteSound()},unmute:function(){GZP.unmuteSound()}}).then(function(t){const d=s([e,a,o,n,i]),l=r(d);return new Function("data",l)(t)}).then(function(e){e&&(gamezop.setState({state:"loaded",score:0}),oMetaManager.sync(),gamezop.isSoundEnabled()?GZP.Utils.setBool("sound",!0):(GZP.muteSound(),GZP.Utils.setBool("sound",!1)),t.gamestart=!0)}).catch(function(t){console.log(t)})},GZP.Preloader.prototype=Object.create(GZP.Layer.prototype),GZP.Preloader.prototype.resize=function(){GZP.Layer.prototype.resize.call(this),this.fade.setRectangle(0,0,this.width,this.height),this.center.x=this.width/2,this.center.y=this.height/2},GZP.Preloader.prototype.update=function(t,e){if(-1!==this.total){var a=GZP.Loader.getQueueLength();a>this.total&&(this.total=a),this.progressValue=Math.max(this.progressValue,1-a/this.total),this.progress.setXFactor(this.progressValue),0===a&&this.loading.visible&&(this.fade.setColorHex(16777215),this.loading.visible=!1,GZLOADER.unload(),GZP.Loading()),GZLOADER.loadProcess(100*this.progressValue),this.ready.tint.a=.2+.8*Math.abs(Math.sin(8*e)),GZP.gamestart&&(GZP.gamestart=!1,GZP.SoundLoader.load("button").play(),GZP.Cross.show(function(){GZP.Application.pushLayer(GZP.Play),GZP.Application.pushLayer(GZP.Menu),GZP.Menu.show()}))}},function(){var t=new Array(100),e=Math.floor(100*Math.random());for(let a=0;a<t.length;a++)t[a]=e;var a=Math.floor(Math.random()*t.length);GZP.initDistance=function(){0,e=Math.floor(100*Math.random());for(let a=0;a<t.length;a++)t[a]=e;a=Math.floor(Math.random()*t.length),score=t[a]-e},GZP.getDistance=function(){return t[a]-e},GZP.incDistance=function(o){o,t[a]+=o;var n=Math.floor(Math.random()*t.length);t[n]=t[a],a=n,Math.floor((t[a]-e)/200)>oMetaManager.meta.highscore&&(oMetaManager.meta.highscore=Math.floor((t[a]-e)/200)),Math.floor((t[a]-e)/200)%50==0&&Math.floor((t[a]-e)/200)>0&&gamezop.setState({state:"playing",score:Math.floor((t[a]-e)/200),metadata:oMetaManager.meta})},GZP.getBestDistance=function(){return oMetaManager.meta.highscore},GZP.setBestDistance=function(t){oMetaManager.meta.highscore=t};var o=new Array(100),n=Math.floor(100*Math.random());for(let t=0;t<o.length;t++)o[t]=n;var i=Math.floor(Math.random()*o.length);GZP.initCoins=function(){0,n=Math.floor(100*Math.random())+GZP.getShopCoins();for(let t=0;t<o.length;t++)o[t]=n;a=Math.floor(Math.random()*o.length),score=o[i]-n},GZP.getCoins=function(){return o[i]-n},GZP.incCoins=function(t){t,o[i]+=t;var e=Math.floor(Math.random()*o.length);o[e]=o[i],i=e,gamezop.setState({state:"playing",score:Math.floor(GZP.getDistance()/200),metadata:oMetaManager.meta,tcount:window.tc,kcount:window.kc})},GZP.getShopCoins=function(){return oMetaManager.meta.data.coins||0},GZP.setShopCoins=function(t){oMetaManager.meta.data.coins=t},GZP.getItemCount=function(t){return oMetaManager.meta.data[t]||0},GZP.setItemCount=function(t,e){oMetaManager.meta.data[t]=e}}(),GZP.initGame=function(){GZP.Application.clearLayers(),GZP.Application.pushLayer(GZP.Play),GZP.Play.show(),GZP.Play.fadeMusic(.25,1)},GZP.pauseGame=function(){GZP.Play.idle||GZP.Play.paused||GZP.Play.onPause(!0)},GZP.resumeGame=function(){GZP.Application.isLayerOnScreen(GZP.Tutorial)&&(GZP.Tutorial.state=GZP.Tutorial.CONTINUE,GZP.Tutorial.hide())},GZP.pauseUpdate=function(){GZP.Application.PAUSE=!0},GZP.resumeUpdate=function(){GZP.Application.PAUSE=!1},GZP.muteSound=function(){GZP.SoundLoader.globalSound=0,GZP.SoundLoader.mute()},GZP.unmuteSound=function(){GZP.SoundLoader.globalSound=1,GZP.SoundLoader.unmute()},GZP.gameInit=function(t){t.matchId&&GZP.initGame()},GZP.gameEnd=function(){gamezop.setState({state:"over",score:Math.floor(GZP.getDistance()/200),tcount:window.tc,kcount:window.kc}),GZP.initGame(),GZP.initDistance(),window.tc=0,window.kc=0},GZP.continueGame=function(){GZP.initGame()},window.addEventListener("GZP_MUTED",function(t){gamezop.gameMuted=!0}),window.addEventListener("GZP_UNMUTED",function(t){gamezop.gameMuted=!1}),window.addEventListener("GZP_PAUSED",function(t){gamezop.setState({state:"paused"})}),window.addEventListener("GZP_UNPAUSED",function(t){gamezop.setState({state:"playing",score:Math.floor(GZP.getDistance()/200),metadata:oMetaManager.meta,tcount:window.tc,kcount:window.kc})}),window.addEventListener("GZP_POINTERUP",function(t){window.tc+=1}),window.addEventListener("GZP_KEYUP",function(t){window.kc+=1}),window.addEventListener("GZP_SOUND_BUTTON",function(t){GZP.SoundLoader.globalSound=GZP.Utils.getBool("sound",!0)?1:0}),window.addEventListener("GZP_PLAY",function(t){window.tc=0,window.kc=0,gamezop.setState({state:"playing",score:0,metadata:oMetaManager.meta,tcount:0,kcount:0})}),window.addEventListener("GZP_GAMEOVER",function(t){gamezop.setState({state:"over",score:Math.floor(GZP.getDistance()/200),metadata:oMetaManager.meta,tcount:window.tc,kcount:window.kc}),window.tc=0,window.kc=0}),window.addEventListener("GZP_RESTART",function(t){GZP.initDistance()});